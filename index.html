<html>
  <head>
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <script src="https://aframe.io/releases/1.4.2/aframe.min.js"></script>
    <script src="https://cdn.jsdelivr.net/gh/donmccurdy/aframe-extras@v6.1.1/dist/aframe-extras.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/mind-ar@1.2.2/dist/mindar-image-aframe.prod.js"></script>
    <script src="https://unpkg.com/aframe-transparent-video-shader@1.0.6/dist/aframe-transparent-video-shader.umd.js"></script>
    <script src="https://cdn.jsdelivr.net/gh/donmccurdy/aframe-extras@v6.1.1/dist/aframe-extras.min.js"></script>
    <script>
      AFRAME.registerComponent('move', {
    init: function() {
      // wait until the model is loaded
      this.el.addEventListener("model-loaded", evt => {
        const mixer = new THREE.AnimationMixer(this.el.components['gltf-model'].model);
        const clips = this.el.components['gltf-model'].model.animations[0];
        mixer.clipAction(clips).play();
        // "expose" the animation mixer
        this.mixer = mixer;
      })
    },
    // on each render loop (actually before each render loop)
    tick: function(t, dt) {
      if (!this.mixer) return; // if the mixer exists
      this.mixer.update(dt / 1000) // update it with the delta time
    }
  })
      </script>
    <script>
      document.addEventListener("DOMContentLoaded", function() {
	const sceneEl = document.querySelector('a-scene');
	let arSystem;
	sceneEl.addEventListener('loaded', function () {
	  arSystem = sceneEl.systems["mindar-image-system"];
	});
	const target0 = document.querySelector('#target0');
	const target1 = document.querySelector('#target1');
	const target2 = document.querySelector('#target2');
	const target3 = document.querySelector('#target3');
	const target4 = document.querySelector('#target4');
	const target5 = document.querySelector('#target5');
	const target6 = document.querySelector('#target6');
	const target7 = document.querySelector('#target7');
	const target8 = document.querySelector('#target8');
	const target9 = document.querySelector('#target9');
	const target10 = document.querySelector('#target10');
	const target11 = document.querySelector('#target11');
	const target12 = document.querySelector('#target12');
	const target13 = document.querySelector('#target13');
	const target14 = document.querySelector('#target14');
	const target15 = document.querySelector('#target15');

	sceneEl.addEventListener("arReady", (event) => {
	  // console.log("MindAR is ready")
	});
	// arError event triggered when something went wrong. Mostly browser compatbility issue
	sceneEl.addEventListener("arError", (event) => {
	  // console.log("MindAR failed to start")
	});
	// detect target found
	target0.addEventListener("targetFound", event => {
    const sound =  target0.components.sound
    console.log("target found", sound);
    sound.playSound()

  });
	// detect target lost
	target0.addEventListener("targetLost", event => {
    target0.components.sound.pauseSound()

	  console.log("target lost");
	});

      });
    </script>
  </head>
  <body>
    <a-scene renderer="antialias: true;
    colorManagement: true;" mindar-image="imageTargetSrc: ./targets.mind; filterMinCF:0.00025; filterBeta: 0.0008" color-space="sRGB" renderer="colorManagement: true, physicallyCorrectLights" vr-mode-ui="enabled: false" device-orientation-permission-ui="enabled: false">
      <a-assets>
        <!-- <a-asset-item id="0" src="/public/0_anim.gltf"></a-asset-item> -->
        <a-asset-item id="1" src="/public/1.gltf"></a-asset-item>
        <a-asset-item id="2" src="/public/2.gltf"></a-asset-item>
        <a-asset-item id="3" src="/public/3.gltf"></a-asset-item>
        <a-asset-item id="4" src="/public/4.gltf"></a-asset-item>
        <a-asset-item id="5" src="/public/5.gltf"></a-asset-item>
        <a-asset-item id="6" src="/public/6.gltf"></a-asset-item>
        <a-asset-item id="7" src="/public/7.gltf"></a-asset-item>
        <a-asset-item id="8" src="/public/8.gltf"></a-asset-item>
        <a-asset-item id="9" src="/public/9.gltf"></a-asset-item>
        <a-asset-item id="10" src="/public/10.gltf"></a-asset-item>
        <a-asset-item id="11" src="/public/11.gltf"></a-asset-item>
        <a-asset-item id="12" src="/public/12.gltf"></a-asset-item>
        <a-asset-item id="13" src="/public/13.gltf"></a-asset-item>
        <a-asset-item id="14" src="/public/14.gltf"></a-asset-item>
        <a-asset-item id="15" src="/public/15.gltf"></a-asset-item>
        <audio id="audio0" src="/public/0.mp3" preload="auto"></audio>
        
        <a-asset-item id="bearModel" src="https://cdn.jsdelivr.net/gh/hiukim/mind-ar-js@1.2.2/examples/image-tracking/assets/band-example/bear/scene.gltf"></a-asset-item>
        <a-asset-item id="raccoonModel" src="https://cdn.jsdelivr.net/gh/hiukim/mind-ar-js@1.2.2/examples/image-tracking/assets/band-example/raccoon/scene.gltf"></a-asset-item>
      </a-assets>

      <a-camera position="0 0 0" look-controls="enabled: false"></a-camera>

      <a-entity id="target0" mindar-image-target="targetIndex: 0" sound="src: #audio0">

        <!-- <a-entity rotation="90 0 0" fbx-model="src: url(/public/0.fbx);" scale="0.15 0.15 0.15"></a-entity> -->
        <!-- <a-entity id="model" rotation="90 0 0" gltf-model="#0" scale="0.15 0.15 0.15"> -->
          <a-entity rotation="90 0 0" gltf-model="/public/0_anim.gltf" move position=".5 0.5 -5" scale="0.5 0.5 0.5"></a-entity>                     
          <!-- <a-sound src="src: url(public/0.mp3)" volume="0.1" on:> -->
          </a-sound>    </a-entity>
        </a-entity>

    <a-entity id="target1" mindar-image-target="targetIndex: 1">
      <a-entity rotation="90 0 0" gltf-model="#0" scale="0.0025 0.0025 0.0025">
        <a-sound src="src: url(public/0.mp3)" volume="0.1" on:>
        </a-sound>    </a-entity>
</a-entity>

  <a-entity id="target2" mindar-image-target="targetIndex: 2">
    <a-entity rotation="90 0 0" gltf-model="#2" scale="0.25 0.25 0.25">
      <a-sound src="src: url(public/0.mp3)" volume="0.1" on:>
      </a-sound>    </a-entity>
  </a-entity>

<a-entity id="target3" mindar-image-target="targetIndex: 3">
  <a-entity rotation="90 0 0" gltf-model="#3" scale="0.25 0.25 0.25">
    <a-sound src="src: url(public/0.mp3)" volume="0.1" on:>
    </a-sound>    </a-entity>
</a-entity>

<a-entity id="target4" mindar-image-target="targetIndex: 4">
  <a-entity rotation="90 0 0" gltf-model="#4" scale="0.25 0.25 0.25"></a-entity>
  <a-sound src="src: url(public/0.mp3)" volume="0.1" on:>
  </a-sound>
</a-entity>

<a-entity id="target5" mindar-image-target="targetIndex: 5">
  <a-entity rotation="90 0 0" gltf-model="#5" scale="0.25 0.25 0.25"></a-entity>
  <a-sound src="src: url(public/0.mp3)" volume="0.1" on:>
  </a-sound>
</a-entity>

<a-entity id="target6" mindar-image-target="targetIndex: 6">
  <a-entity rotation="90 0 0" gltf-model="#6" scale="0.25 0.25 0.25"></a-entity>
  <a-sound src="src: url(public/0.mp3)" volume="0.1" on:>
  </a-sound>
</a-entity>

<a-entity id="target7" mindar-image-target="targetIndex: 7">
  <a-entity rotation="90 0 0" gltf-model="#7" scale="0.25 0.25 0.25"></a-entity>
  <a-sound src="src: url(public/0.mp3)" volume="0.1" on:>
  </a-sound>
</a-entity>

<a-entity id="target8" mindar-image-target="targetIndex: 8">
  <a-entity rotation="90 0 0" gltf-model="#8" scale="0.25 0.25 0.25"></a-entity>
  <a-sound src="src: url(public/0.mp3)" volume="0.1" on:>
  </a-sound>
</a-entity>

<a-entity id="target9" mindar-image-target="targetIndex: 9">
  <a-entity rotation="90 0 0" gltf-model="#9" scale="0.25 0.25 0.25"></a-entity>
  <a-sound src="src: url(public/0.mp3)" volume="0.1" on:>
  </a-sound>
</a-entity>

<a-entity id="target10" mindar-image-target="targetIndex: 10">
  <a-entity rotation="90 0 0" gltf-model="#10" scale="0.25 0.25 0.25"></a-entity>
  <a-sound src="src: url(public/0.mp3)" volume="0.1" on:>
  </a-sound>
</a-entity>

<a-entity id="target11" mindar-image-target="targetIndex: 11">
  <a-entity rotation="90 0 0" gltf-model="#11" scale="0.25 0.25 0.25"></a-entity>
  <a-sound src="src: url(public/0.mp3)" volume="0.1" on:>
  </a-sound>
</a-entity>

<a-entity id="target12" mindar-image-target="targetIndex: 12">
  <a-entity rotation="90 0 0" gltf-model="#12" scale="0.25 0.25 0.25"></a-entity>
  <a-sound src="src: url(public/0.mp3)" volume="0.1" on:>
  </a-sound>
</a-entity>

<a-entity id="target13" mindar-image-target="targetIndex: 13">
  <a-entity rotation="90 0 0" gltf-model="#13" scale="0.25 0.25 0.25"></a-entity>
  <a-sound src="src: url(public/0.mp3)" volume="0.1" on:>
  </a-sound>
</a-entity>

<a-entity id="target14" mindar-image-target="targetIndex: 14">
  <a-entity rotation="90 0 0" gltf-model="#14" scale="0.25 0.25 0.25"></a-entity>
  <a-sound src="src: url(public/0.mp3)" volume="0.1" on:>
  </a-sound>
</a-entity>

<a-entity id="target15" mindar-image-target="targetIndex: 15">
  <a-entity rotation="90 0 0" gltf-model="#15" scale="0.25 0.25 0.25"></a-entity>
  <a-sound src="src: url(public/0.mp3)" volume="0.1" on:>
  </a-sound>
</a-entity>


    </a-scene>
  </body>
</html>